function getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var s=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=s.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}jQuery(document).ready(function(e){jQuery("#module-order-course").select2({width:"resolve"}),jQuery("select#lesson-module-options").select2({width:"resolve"}),jQuery(".sortable-module-list").sortable(),jQuery(".sortable-tab-list").disableSelection(),jQuery(".sortable-module-list").bind("sortstop",function(e,s){var o="";jQuery(this).find(".module").each(function(e,s){if(e>0&&(o+=","),o+=jQuery(this).find("span").attr("rel"),jQuery(this).removeClass("alternate"),jQuery(this).removeClass("first"),jQuery(this).removeClass("last"),0==e)jQuery(this).addClass("first alternate");else{var t=e%2;0==t&&jQuery(this).addClass("alternate")}}),jQuery('input[name="module-order"]').attr("value",o)}),jQuery("select.ajax_chosen_select_courses").select2({minimumInputLength:2,placeholder:modulesAdmin.selectplaceholder,width:"300px",multiple:!0,ajax:{url:ajaxurl,dataType:"json",cache:!0,data:function(e){return{term:e.term,page:e.page||1,action:"sensei_json_search_courses",security:modulesAdmin.search_courses_nonce,"default":""}},processResults:function(e,s){var o=[];return jQuery.each(e,function(e,s){jQuery.isEmptyObject(s)||(validcourse={id:e,text:s},o.push(validcourse))}),{results:o,page:s}}}}),jQuery("#sensei-module-add-toggle").on("click",function(e){var s="wp-hidden-child",o=jQuery(this).parent().next("p#sensei-module-add"),t=o.children("#newmodule");return o.hasClass(s)?(o.removeClass(s),t.val(""),void t.focus()):void o.addClass(s)}),jQuery("#sensei-module-add-submit").on("click",function(e){var s=getParameterByName("post"),o=jQuery(this).parent().children("#newmodule"),t=jQuery(this).parent().children("#add_module_nonce"),r=jQuery("#module_course_mb #taxonomy-module #module-all ul#modulechecklist"),u=o.val(),l=t.val();if(_.isEmpty(u)||_.isEmpty(l))return void o.focus();var a={newTerm:u,security:l,action:"sensei_add_new_module_term",course_id:s};jQuery.post(ajaxurl,a,function(e){if(e.success){var s=e.data.termId,t=e.data.termName;if(!(parseInt(s)>0)||_.isEmpty(t))return void o.focus();var u='<li id="module-'+s+'">';return u+='<label class="selectit">',u+='<input value="'+s+'" type="checkbox" checked="checked" name="tax_input[module][]" id="in-module-'+s+'">',u+=t,u+="</label></li>",r.prepend(u),o.val(""),void o.focus()}if("undefined"!=typeof e.data.errors&&"undefined"!=typeof e.data.errors.term_exists){var s=e.data.term.id,l=r.find("#module-"+s+" input");l.prop("checked","checked"),l.focus(),o.val("")}else console.log(e)})});var s=jQuery("#lesson-course-options"),o=jQuery("div#lesson-module-metabox-select");s.on("change",function(e){if(!modulesAdmin.getCourseModulesNonce)return void console.log("missing modulesAdmin.getCourseModulesNonce");var t=s.val(),r={security:modulesAdmin.getCourseModulesNonce,action:"sensei_get_course_modules",course_id:t};return r.course_id?void jQuery.post(ajaxurl,r,function(e){if(!0===e.success){var s=e.data.content;o.html(s),jQuery("select#lesson-module-options").select2({width:"resolve"})}}):void console.log("missing data.course_id")})});